# Philippine Weather Station Dashboard - Complete Operating Guide

**Your all-in-one guide to setup, deploy, and operate the entire weather dashboard project.**

---

## ğŸ“‹ Table of Contents

1. [System Overview](#system-overview)
2. [Hardware & Software Requirements](#requirements)
3. [Installation](#installation)
4. [Configuration](#configuration)
5. [Startup Methods](#startup-methods)
6. [Operating the Dashboard](#operating-the-dashboard)
7. [Troubleshooting](#troubleshooting)
8. [Maintenance](#maintenance)

---

## System Overview

### What This Project Does

A **real-time weather dashboard** displaying data from 6 Luzon Philippine weather stations, with separate real and test data paths:

- **ğŸŸ¢ Real Data Mode**: Live data from ESP32 weather sensors
- **ğŸŸ  Test Mode**: Generated test data for validation
- **Dashboard Access**: Web interface (Next.js) on localhost:3000
- **GUI Options**: PyQt5 desktop app on Raspberry Pi

### Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          Next.js Web Dashboard (Frontend)            â”‚
â”‚     - 6 Luzon stations with real-time updates        â”‚
â”‚     - Real/Test mode toggle button                   â”‚
â”‚     - Language toggle (EN/TL)                        â”‚
â”‚     - Station-specific sensors                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ (React + TypeScript + Tailwind CSS)
             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Node.js Backend (Express/Next.js API Routes)     â”‚
â”‚     - Serves web interface on port 3000              â”‚
â”‚     - Connects to Firebase Realtime Database         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Firebase Realtime Database (asia-southeast1)  â”‚
â”‚                                                      â”‚
â”‚  â”œâ”€â”€ /weatherStations/        (Real data)           â”‚
â”‚  â”‚   â”œâ”€â”€ manila, laguna, pampanga, cavite,          â”‚
â”‚  â”‚   â”‚   bulacan, batangas                          â”‚
â”‚  â”‚   â””â”€â”€ Data from ESP32 devices                    â”‚
â”‚  â”‚                                                   â”‚
â”‚  â””â”€â”€ /testWeatherStations/    (Test data)           â”‚
â”‚      â”œâ”€â”€ manila, laguna, pampanga, cavite,          â”‚
â”‚      â”‚   bulacan, batangas                          â”‚
â”‚      â””â”€â”€ Generated by Random toggle                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Optional: PyQt5 GUI (Raspberry Pi)
    â””â”€â”€ Wraps the Next.js dashboard in a desktop window
```

### Station Configuration

| Station | Location | Main Sensors | Extra Sensors |
|---------|----------|--------------|---------------|
| Manila | Metro Manila | Temp, Humidity, Rain, Wind | Pressure, Solar Radiation |
| Laguna | Santa Rosa | Temp, Humidity, Rain, Wind | Soil Moisture |
| Pampanga | Capas | Temp, Humidity, Rain, Wind | UV Index, Visibility |
| Cavite | Kawit | Temp, Humidity, Rain, Wind | â€” |
| Bulacan | Bulacan | Temp, Humidity, Rain, Wind | Soil Moisture, Pressure |
| Batangas | Lipa | Temp, Humidity, Rain, Wind | UV Index |

---

## Requirements

### Hardware

- **Raspberry Pi 4** (2GB RAM minimum, 4GB+ recommended) - Optional
- **Any computer** (Windows/Mac/Linux) - Can run locally
- **Internet connection** (WiFi or Ethernet)
- **Storage**: ~500MB free space

### Software

- **Node.js**: 18.x or later
- **npm**: 9.x or later
- **Python**: 3.9+ (for Raspberry Pi GUI only)
- **Firebase Project**: With Realtime Database enabled
- **Browser**: Any modern browser (Chrome, Firefox, Safari, Edge)

### Before Starting

Have these ready:
- [ ] Firebase credentials (`.env.local` file)
- [ ] Internet connection working
- [ ] Port 3000 available (or change it)
- [ ] Admin SDK credentials (for populating initial data)

---

## Installation

### Option 1: Local Computer (Windows/Mac/Linux)

#### Step 1: Get the Project

```bash
# Clone or navigate to project directory
cd /path/to/weather-dashboard
```

#### Step 2: Install Dependencies

```bash
npm install
pip install -r rpi/requirements.txt  # Optional: for GUI testing
```

#### Step 3: Configure Environment

Copy your `.env.local` file with Firebase credentials:

```bash
# Windows PowerShell
Copy-Item "path\to\.env.local" "." 

# Mac/Linux
cp /path/to/.env.local .
```

File should contain:
```env
NEXT_PUBLIC_FIREBASE_API_KEY=your_api_key
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=your_domain.firebaseapp.com
NEXT_PUBLIC_FIREBASE_DATABASE_URL=https://your-project.firebaseio.com
NEXT_PUBLIC_FIREBASE_PROJECT_ID=your_project_id
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=your_project.appspot.com
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=your_sender_id
NEXT_PUBLIC_FIREBASE_APP_ID=your_app_id
```

#### Step 4: Populate Initial Data

```bash
# Populate real data to /weatherStations/
node scripts/generate-initial-data.js

# Populate test data to /testWeatherStations/
node scripts/generate-test-data.js
```

âœ… **Installation complete!** Proceed to [Startup Methods](#startup-methods).

---

### Option 2: Raspberry Pi

#### Step 1: Transfer Project

From your computer:
```bash
# Windows PowerShell
scp -r . pi@192.168.1.x:/home/pi/weather-dashboard

# Mac/Linux
scp -r . pi@192.168.1.x:/home/pi/weather-dashboard
```

Or SSH into Pi and clone:
```bash
ssh pi@192.168.1.x
git clone <your-repo-url> weather-dashboard
cd weather-dashboard
```

#### Step 2: Run Installation Script

```bash
cd rpi
chmod +x install.sh
./install.sh
```

The script automatically:
- Updates system packages
- Installs Node.js 18+ and Python 3.9+
- Installs PyQt5 dependencies
- Runs `npm install`
- Creates `.env.local` template
- Sets up systemd service for autostart

#### Step 3: Copy Credentials

```bash
# From computer, copy your .env.local
scp .env.local pi@192.168.1.x:/home/pi/weather-dashboard/
```

#### Step 4: Populate Initial Data

```bash
ssh pi@192.168.1.x
cd /home/pi/weather-dashboard

# Populate both data paths
node scripts/generate-initial-data.js
node scripts/generate-test-data.js
```

âœ… **Raspberry Pi ready!** Proceed to [Startup Methods](#startup-methods).

---

## Configuration

### ESP32 Weather Station Setup

**For sending real sensor data to Firebase:**

ğŸ“„ **Template File**: `ESP32_WEATHER_STATION_TEMPLATE.ino`

**What it does:**
- Reads 5 main sensors: Temperature, Humidity, Rainfall, Wind Speed, Wind Vane
- Reads station-specific extra sensors (varies per location)
- Uploads to Firebase `/weatherStations/{location}/` every 30 seconds

#### Option A: Manual Setup (Traditional)

1. **Download the template** (in project root)
2. **Open in Arduino IDE**
3. **Configure at top of file:**
   ```cpp
   const char* ssid = "YOUR_WIFI_SSID";
   const char* password = "YOUR_WIFI_PASSWORD";
   const char* firebaseHost = "your-project.firebaseio.com";
   const char* firebaseAuth = "your_firebase_database_secret";
   
   const char* STATION_LOCATION = "manila";  // Change per station
   ```

4. **Enable station-specific sensors** (uncomment for your station):
   ```cpp
   // Manila: atmospheric pressure + solar radiation
   #define HAS_ATMOSPHERIC_PRESSURE
   #define HAS_SOLAR_RADIATION
   ```

5. **Connect sensors to GPIO pins** (see `#define` statements for pin numbers)

6. **Upload to ESP32**

#### Option B: Automated Setup (Web Dashboard) â­ **NEW**

The dashboard now includes an **Arduino Code Customizer** for faster setup:

1. **Open the web dashboard**: http://localhost:3000
2. **Scroll to ğŸ¤– ESP32 Panel**
3. **Click "Customize Sensors" button**
4. **Select your station from dropdown:**
   - Manila, Laguna, Pampanga, Cavite, Bulacan, Batangas
5. **Choose which sensors to include** (checkboxes appear):
   - ğŸ™ï¸ Atmospheric Pressure
   - â˜€ï¸ Solar Radiation
   - ğŸŒ± Soil Moisture
   - ğŸŒ UV Index
   - ğŸ‘ï¸ Visibility
6. **Click "Download Code"**
7. **Pre-configured Arduino file downloads with:**
   - Station location pre-filled
   - Selected sensors already enabled
   - Station name and municipality set
   - Ready to add WiFi credentials and upload
8. **Open in Arduino IDE:**
   - Only add WiFi SSID and password
   - Add Firebase credentials at top
   - Upload directly to ESP32

**Benefits of automated setup:**
- âœ… No manual configuration needed
- âœ… Sensors pre-configured per station
- âœ… Faster deployment
- âœ… Fewer errors
- âœ… Ready-to-use code

**Station Configurations:**
- **Manila**: HAS_ATMOSPHERIC_PRESSURE, HAS_SOLAR_RADIATION
- **Laguna**: HAS_SOIL_MOISTURE
- **Pampanga**: HAS_UV_INDEX, HAS_VISIBILITY
- **Cavite**: (no extra sensors)
- **Bulacan**: HAS_SOIL_MOISTURE, HAS_ATMOSPHERIC_PRESSURE
- **Batangas**: HAS_UV_INDEX

---

### Firebase Environment Variables

Required in `.env.local`:

```env
# ===== Firebase Config =====
NEXT_PUBLIC_FIREBASE_API_KEY=your_api_key
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=your_domain.firebaseapp.com
NEXT_PUBLIC_FIREBASE_DATABASE_URL=https://your-project.firebaseio.com
NEXT_PUBLIC_FIREBASE_PROJECT_ID=your_project_id
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=your_project.appspot.com
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=your_sender_id
NEXT_PUBLIC_FIREBASE_APP_ID=your_app_id
```

### Firebase Data Structure

The system uses **two separate Firebase paths**:

**Path 1: `/weatherStations/` (Real Data)**
- Source: ESP32 weather devices (via Arduino template)
- Updated by: Sensor readings every 30 seconds
- Display: ğŸŸ¢ Real Data button
- Structure: 6 station objects (manila, laguna, pampanga, cavite, bulacan, batangas)

**Path 2: `/testWeatherStations/` (Test Data)**
- Source: Random generator
- Updated by: Manual toggle (ğŸ² Random button)
- Display: ğŸŸ  Test Mode button
- Structure: Same 6 stations for validation

### Port Configuration

Default: **3000**

To change port, edit `next.config.ts`:
```typescript
// Change listen port
const PORT = process.env.PORT || 3001;
```

### Autostart (Raspberry Pi)

#### Option A: Systemd Service (Recommended)

```bash
systemctl --user enable weather-dashboard
systemctl --user start weather-dashboard
```

#### Option B: Crontab

```bash
crontab -e

# Add this line:
@reboot python3 /home/pi/weather-dashboard/rpi/gui_app.py &
```

#### Option C: Desktop Autostart

Installer creates: `~/.config/autostart/weather-dashboard.desktop`

---

## Startup Methods

### Method 1: Web Browser (Any Computer)

**For development or remote access:**

```bash
# Start dev server
npm run dev

# Server running at http://localhost:3000
# Open in browser
```

**Pros:**
- Simple, no extra dependencies
- Works on any device with a browser
- Good for development

**Cons:**
- No system integration
- Manual start required

---

### Method 2: Raspberry Pi GUI Application

**For desktop display on Raspberry Pi:**

```bash
python3 rpi/gui_app.py
```

**Pros:**
- Desktop window integration
- System tray icon
- Automatic server management
- Point-and-click interface
- Clean, embedded dashboard view

**Cons:**
- PyQt5 required
- Higher resource usage (Raspberry Pi 4 recommended)

**Output:**
```
Starting PyQt5 GUI Application...
Starting Node.js server on port 3000...
Loading dashboard...
[âœ“ Server running on http://localhost:3000]
```

A window opens displaying the dashboard with embedded web interface.

**GUI Features:**

1. **Status Bar**
   - Shows "âœ“ Server running on http://localhost:3000" (green)
   - Progress bar indicates loading status
   - Red warning if connection fails

2. **Control Buttons (Top)**
   - ğŸŒ **Open Dashboard**: Opens http://localhost:3000 in your default browser
   - âš™ï¸ **Settings**: Shows dashboard configuration and feature information
   - ğŸ”„ **Refresh**: Reloads the embedded dashboard

3. **Dashboard Features (Inside)**
   - Real/Test mode toggle (ğŸŸ¢/ğŸŸ  buttons)
   - 6 Luzon stations with live data
   - Station-specific sensors displayed
   - ğŸ² Random data generator (visible in Test mode)
   - Language toggle (EN/TL)
   - ğŸ¤– ESP32 Customizer panel

4. **System Tray**
   - Right-click tray icon for menu
   - Show/Hide window
   - Quit application
   - Server runs in background

**Closing the GUI:**
- Click window close button (X)
- Or select "Quit" from tray menu
- This stops both GUI and development server

---

### Method 3: Fullscreen Kiosk Mode (Raspberry Pi)

**For wall-mounted displays:**

```bash
python3 rpi/kiosk_app.py
```

**Pros:**
- Fullscreen display
- No window controls
- Perfect for information display

**Cons:**
- No GUI controls (stop via SSH)
- Requires manual keyboard exit (Ctrl+Q)

**To stop remotely:**
```bash
ssh pi@192.168.1.x
pkill -f kiosk_app.py
```

---

### Method 4: Background Service (Raspberry Pi)

**For 24/7 operation:**

```bash
# Enable at boot
systemctl --user enable weather-dashboard

# Start now
systemctl --user start weather-dashboard

# Check status
systemctl --user status weather-dashboard

# View logs
journalctl --user-unit=weather-dashboard -f

# Stop
systemctl --user stop weather-dashboard
```

**Pros:**
- Automatic startup on boot
- Runs in background
- Service management
- Log tracking

**Cons:**
- No visible window
- Browser access required for viewing

---

### Method 5: Production Build (Raspberry Pi)

**For optimized performance:**

```bash
# Build production version
npm run build

# Start production server
npm run start

# Access at http://192.168.1.x:3000
```

**Pros:**
- Optimized bundle
- Better performance
- Smaller file size

**Cons:**
- Rebuild required for changes
- Longer initial startup

---

## Operating the Dashboard

### Basic Operation

#### 1. Start the Application

Choose one method from [Startup Methods](#startup-methods) above.

Wait 5-10 seconds for server to start and data to load.

#### 2. View Real Data (Default)

```
ğŸŸ¢ Real Data button is active (green)
â”œâ”€â”€ Displays 6 Luzon stations
â”œâ”€â”€ Data from /weatherStations/ path
â”œâ”€â”€ Updates from ESP32 sensors
â””â”€â”€ Random toggle button: HIDDEN
```

**What you see:**
- Manila: 28.5Â°C with Pressure & Solar Radiation
- Laguna: 28.2Â°C with Soil Moisture
- Pampanga: 30.2Â°C with UV Index & Visibility
- Cavite: 29.1Â°C (main sensors only)
- Bulacan: 27.5Â°C with Soil Moisture & Pressure
- Batangas: 29.5Â°C with UV Index

#### 3. Switch to Test Mode

```
Click ğŸŸ  "Test Mode" button
â”œâ”€â”€ Displays 6 Luzon stations (same locations)
â”œâ”€â”€ Data from /testWeatherStations/ path
â”œâ”€â”€ Different values than real data
â””â”€â”€ Random toggle button: NOW VISIBLE
```

#### 4. Generate Test Data

```
Click ğŸ² "Random" button
â”œâ”€â”€ Toggles ON (blue highlight)
â”œâ”€â”€ Updates test data every 5 seconds
â”œâ”€â”€ Sends to /testWeatherStations/ path
â””â”€â”€ Real data (/weatherStations/) UNCHANGED
```

**Watch the data:**
- Temperature changes randomly
- Wind speeds vary
- Extra sensors update
- Timestamp updates every 5 seconds

#### 5. Stop Test Data

```
Click ğŸ² "Random" button again
â”œâ”€â”€ Toggles OFF (gray)
â”œâ”€â”€ Data stops updating
â””â”€â”€ Current values frozen
```

#### 6. Switch Back to Real Data

```
Click ğŸŸ¢ "Real Data" button
â”œâ”€â”€ Returns to /weatherStations/ path
â”œâ”€â”€ Shows original ESP32 data
â”œâ”€â”€ Random toggle button: HIDDEN
â””â”€â”€ Data updates from sensors
```

### Additional Controls

**Language Toggle:**
```
Click EN/TL button
â”œâ”€â”€ EN: English interface
â””â”€â”€ TL: Tagalog interface
```

**Region Selection:**
```
Select station from list
â”œâ”€â”€ Displays detailed sensor data
â””â”€â”€ Shows graph/chart (if enabled)
```

#### 7. Download Customized Arduino Code â­ **NEW**

For setting up new ESP32 weather stations directly from the dashboard:

```
Scroll to ğŸ¤– "ESP32" Panel
â”‚
â”œâ”€ Click "Customize Sensors" button
â”‚
â”œâ”€ Dashboard expands with options:
â”‚  â”œâ”€ Station Dropdown (Manila, Laguna, Pampanga, Cavite, Bulacan, Batangas)
â”‚  â””â”€ Sensor Checkboxes (Pressure, Solar, Soil, UV, Visibility)
â”‚
â”œâ”€ Select your station location
â”‚
â”œâ”€ Check sensors relevant to that station:
â”‚  (Default: All sensors enabled)
â”‚
â””â”€ Click "Download Code"
   â”‚
   â””â”€ .ino file downloads with:
      â”œâ”€ Station location pre-filled
      â”œâ”€ Station name pre-filled
      â”œâ”€ Selected sensors already #defined
      â””â”€ Ready to add WiFi & Firebase credentials
```

**Quick Setup After Download:**

1. Extract the downloaded `.ino` file
2. Open in Arduino IDE
3. Edit these values at top:
   ```cpp
   const char* ssid = "YOUR_WIFI_SSID";
   const char* password = "YOUR_WIFI_PASSWORD";
   const char* firebaseHost = "your-project.firebaseio.com";
   const char* firebaseAuth = "your_database_secret";
   ```
4. Connect ESP32 via USB
5. Upload to board
6. Done! Data flows to Firebase `/weatherStations/{location}/`

**Example Download Workflow:**
- Select: **Laguna** station
- Check: **Soil Moisture** sensor
- Result: Downloads with `#define HAS_SOIL_MOISTURE` enabled
- Ready to add credentials and upload

---

### Real vs Test Data - Quick Reference

| Feature | Real Mode (ğŸŸ¢) | Test Mode (ğŸŸ ) |
|---------|---|---|
| Data Path | `/weatherStations/` | `/testWeatherStations/` |
| Source | ESP32 devices | Random generator |
| Random Button | Hidden | Visible |
| Updates | Continuous | Only when Random ON |
| Purpose | Production | Testing/Validation |
| Data Isolation | Complete | Complete |

---

## Troubleshooting

### Problem: Server Won't Start

**Error:** "Error: listen EADDRINUSE: address already in use :::3000"

**Solution:**
```bash
# Option 1: Kill existing process
# Windows PowerShell
Stop-Process -Name "node" -Force

# Mac/Linux
pkill -f "node"

# Option 2: Use different port
PORT=3001 npm run dev
```

---

### Problem: Dashboard Shows No Data

**Error:** "No weather data available" or blank stations

**Solution:**

1. Check Firebase connection:
   ```bash
   # Verify .env.local has credentials
   cat .env.local | grep FIREBASE
   ```

2. Verify data exists in Firebase:
   - Go to https://console.firebase.google.com
   - Check `/weatherStations/` path
   - Confirm station entries exist

3. Repopulate if empty:
   ```bash
   node scripts/generate-initial-data.js
   node scripts/generate-test-data.js
   ```

4. Restart server:
   ```bash
   # Stop (Ctrl+C in terminal)
   # Restart:
   npm run dev
   ```

---

### Problem: Test Mode Random Button Doesn't Work

**Error:** Random button doesn't toggle or data doesn't update

**Solution:**

1. Ensure you're in ğŸŸ  Test Mode (not Real Data)
2. Check browser console for errors (F12)
3. Verify Firebase connection working
4. Check `/testWeatherStations/` path exists in Firebase
5. Try refreshing page (F5)

---

### Problem: Real/Test Data Mixed Up

**Error:** Seeing test values in Real Mode or vice versa

**Solution:**

1. **Clear browser cache** (Ctrl+Shift+Delete)
2. **Verify correct mode:**
   ```
   ğŸŸ¢ Green = Real Data (/weatherStations/)
   ğŸŸ  Orange = Test Mode (/testWeatherStations/)
   ```
3. **Switch modes:**
   - Click opposite button
   - Wait 2 seconds
   - Click back to desired mode
4. **Hard refresh page** (Ctrl+F5 or Cmd+Shift+R)

---

### Problem: Raspberry Pi GUI Won't Start

**Error:** "PyQt5 not found" or GUI window doesn't open

**Solution:**

1. Reinstall Python dependencies:
   ```bash
   pip3 install -r rpi/requirements.txt
   ```

2. Check if Node.js installed:
   ```bash
   node --version
   npm --version
   ```

3. Try manual method:
   ```bash
   npm run dev
   # Then open browser to http://localhost:3000
   ```

---

### Problem: Service Won't Start (Raspberry Pi)

**Error:** `systemctl --user start weather-dashboard` fails

**Solution:**

```bash
# Check service status
systemctl --user status weather-dashboard

# View error logs
journalctl --user-unit=weather-dashboard -n 50

# Manually try to start
python3 rpi/gui_app.py

# If it works manually but not as service:
# 1. Check .env.local exists and has credentials
# 2. Verify paths in gui_app.py are correct
# 3. Enable user lingering (for background service):
loginctl enable-linger pi
```

---

### Problem: Performance Issues

**Symptoms:** Slow updates, high CPU/memory usage

**Solution:**

1. **Check resource usage:**
   ```bash
   # On Raspberry Pi
   top
   htop
   ```

2. **Reduce background processes:**
   ```bash
   # Disable Bluetooth
   sudo systemctl disable bluetooth
   
   # Disable WiFi power saving
   sudo nano /etc/modprobe.d/brcmfmac.conf
   # Add: options brcmfmac power_save=0
   ```

3. **Use production build:**
   ```bash
   npm run build
   npm run start
   ```

4. **Switch from GUI to headless:**
   ```bash
   # Stop GUI
   systemctl --user stop weather-dashboard
   
   # Start web-only
   npm run start &
   ```

---

## Maintenance

### Daily Operations

**Checklist:**
- [ ] Dashboard accessible at http://localhost:3000
- [ ] ğŸŸ¢ Real Data shows 6 stations
- [ ] Data updates every 5-10 seconds
- [ ] ğŸŸ  Test Mode accessible
- [ ] ğŸ² Random toggle works
- [ ] No console errors (F12)

### Weekly Tasks

```bash
# Check logs for errors
journalctl --user-unit=weather-dashboard -p err

# Verify Firebase connectivity
curl "https://your-project.firebaseio.com/.json"

# Update npm packages (optional)
npm update
```

### Monthly Tasks

```bash
# Rebuild production bundle
npm run build

# Clean build artifacts
rm -rf .next node_modules
npm install
npm run build

# Backup environment file
cp .env.local .env.local.backup
```

### When Adding New Stations

```bash
# 1. Update src/types/weather.ts
# 2. Add station to scripts/generate-initial-data.js
# 3. Add station to scripts/generate-test-data.js
# 4. Regenerate data:
node scripts/generate-initial-data.js
node scripts/generate-test-data.js
```

### Resetting Everything

```bash
# Clear all data
rm -rf .next node_modules package-lock.json

# Clear Firebase (in console, or delete paths)
# Delete /weatherStations/ and /testWeatherStations/

# Reinstall
npm install

# Repopulate
node scripts/generate-initial-data.js
node scripts/generate-test-data.js

# Restart
npm run dev
```

---

## Quick Reference

### Commands

```bash
# Development
npm run dev              # Start dev server on :3000
npm run build            # Create production bundle
npm run start            # Run production build

# Data Population
node scripts/generate-initial-data.js    # Populate /weatherStations/
node scripts/generate-test-data.js       # Populate /testWeatherStations/

# Raspberry Pi GUI
python3 rpi/gui_app.py              # Start GUI application
python3 rpi/kiosk_app.py            # Start fullscreen mode

# Service Management (Pi)
systemctl --user start weather-dashboard         # Start service
systemctl --user stop weather-dashboard          # Stop service
systemctl --user status weather-dashboard        # Check status
systemctl --user enable weather-dashboard        # Enable autostart
journalctl --user-unit=weather-dashboard -f      # View logs
```

### Ports & URLs

```
Development:   http://localhost:3000
Production:    http://192.168.x.x:3000
Firebase:      https://console.firebase.google.com
```

### File Locations

```
Project Root:           /path/to/weather-dashboard/
Environment Config:     .env.local
Firebase Credentials:   .credentials/autoweathersys-firebase-*.json
Scripts:                scripts/generate-*.js
Raspberry Pi Files:     rpi/
Source Code:            src/
```

---

## Support & Resources

- **Firebase Console**: https://console.firebase.google.com
- **Next.js Docs**: https://nextjs.org
- **React Docs**: https://react.dev
- **Firebase Docs**: https://firebase.google.com/docs

For issues:
1. Check [Troubleshooting](#troubleshooting) section
2. View application logs
3. Verify Firebase connection
4. Confirm .env.local configuration
5. Check network/internet connectivity

---

**Last Updated:** December 14, 2025
**Version:** 1.0 - Complete Operating Guide
